# KanjiQuest iOS - CI Secrets Template

**For Jay to fill in and configure in GitHub Actions.**

Go to: `github.com/Jay-Network/monorepo/settings/secrets/actions`

---

## App Secrets (4)

| Secret Name | Value | Notes |
|-------------|-------|-------|
| `SUPABASE_URL` | `https://__________.supabase.co` | From supabase.com dashboard |
| `SUPABASE_ANON_KEY` | `eyJ___...` | Supabase > Settings > API > anon/public |
| `SUPABASE_SERVICE_ROLE_KEY` | `eyJ___...` | Supabase > Settings > API > service_role |
| `GEMINI_API_KEY` | `AIza___...` | From aistudio.google.com |

---

## Apple Developer Signing (5)

| Secret Name | Value | How to Get |
|-------------|-------|------------|
| `APPLE_TEAM_ID` | `__________` | developer.apple.com > Membership > Team ID |
| `APPLE_CERTIFICATE_BASE64` | (long base64 string) | See instructions below |
| `APPLE_CERTIFICATE_PASSWORD` | `__________` | Password you set when exporting .p12 |
| `APPLE_PROVISIONING_PROFILE_BASE64` | (long base64 string) | See instructions below |
| `KEYCHAIN_PASSWORD` | `__________` | Any random string (e.g., `temp-keychain-2024`) |

### Creating APPLE_CERTIFICATE_BASE64

On a Mac:
```bash
# 1. Open Keychain Access
# 2. Request certificate from CA (Certificate Assistant menu)
# 3. Upload CSR to developer.apple.com > Certificates > Distribution
# 4. Download .cer, double-click to install
# 5. Export as .p12 from Keychain (right-click > Export, set password)
# 6. Base64 encode:
base64 -i certificate.p12 | pbcopy
# Paste the clipboard content into the secret
```

### Creating APPLE_PROVISIONING_PROFILE_BASE64

```bash
# 1. developer.apple.com > Profiles > New
# 2. Type: App Store Distribution
# 3. App ID: com.jworks.kanjiquest.ipad
# 4. Select your distribution certificate
# 5. Download .mobileprovision file
# 6. Base64 encode:
base64 -i KanjiQuest_AppStore.mobileprovision | pbcopy
# Paste the clipboard content into the secret
```

---

## App Store Connect API (3)

| Secret Name | Value | How to Get |
|-------------|-------|------------|
| `ASC_KEY_ID` | `__________` | App Store Connect > Users > Integrations > Keys |
| `ASC_ISSUER_ID` | `__________` | Same page as above (top of page) |
| `ASC_PRIVATE_KEY` | (multi-line .p8 content) | Downloaded when creating key |

### Creating App Store Connect API Key

1. Go to: `appstoreconnect.apple.com`
2. Users and Access > Integrations > App Store Connect API
3. Click "+" to generate a new key
4. Role: **App Manager** (minimum needed)
5. Save:
   - **Key ID** → `ASC_KEY_ID`
   - **Issuer ID** → `ASC_ISSUER_ID`
   - Download .p8 file → paste contents into `ASC_PRIVATE_KEY`

⚠️ You can only download the .p8 file ONCE. Store it securely.

---

## Summary Checklist

- [ ] `SUPABASE_URL`
- [ ] `SUPABASE_ANON_KEY`
- [ ] `SUPABASE_SERVICE_ROLE_KEY`
- [ ] `GEMINI_API_KEY`
- [ ] `APPLE_TEAM_ID`
- [ ] `APPLE_CERTIFICATE_BASE64`
- [ ] `APPLE_CERTIFICATE_PASSWORD`
- [ ] `APPLE_PROVISIONING_PROFILE_BASE64`
- [ ] `KEYCHAIN_PASSWORD`
- [ ] `ASC_KEY_ID`
- [ ] `ASC_ISSUER_ID`
- [ ] `ASC_PRIVATE_KEY`

**Total: 12 secrets** (CI-SETUP.md said 13, but these are the required ones)

---

## Quick Setup Order

1. **Apple Developer Account** - Ensure membership is active at developer.apple.com
2. **Create App ID** - `com.jworks.kanjiquest.ipad` at developer.apple.com
3. **Create Distribution Certificate** - Requires Mac with Keychain Access
4. **Create Provisioning Profile** - Links certificate to app ID
5. **Create App Store Connect API Key** - For automated uploads
6. **Configure GitHub Secrets** - Add all 12 secrets above
7. **Trigger Build** - Push to `apps/KanjiQuest/ios-app/` or manual workflow run

---

*Generated by jworks:47 (KanjiQuest iPad agent)*
